// å›½å®¶/åœ°åŒºåç§°åˆ°å›½æ—— emoji çš„æ˜ å°„
const flagMap: Record<string, string> = {
  // äºšæ´²
  'é¦™æ¸¯': 'ğŸ‡­ğŸ‡°', 'HK': 'ğŸ‡­ğŸ‡°', 'Hong Kong': 'ğŸ‡­ğŸ‡°', 'æ¸¯': 'ğŸ‡­ğŸ‡°',
  'å°æ¹¾': 'ğŸ‡¹ğŸ‡¼', 'TW': 'ğŸ‡¹ğŸ‡¼', 'Taiwan': 'ğŸ‡¹ğŸ‡¼', 'å°': 'ğŸ‡¹ğŸ‡¼',
  'æ—¥æœ¬': 'ğŸ‡¯ğŸ‡µ', 'JP': 'ğŸ‡¯ğŸ‡µ', 'Japan': 'ğŸ‡¯ğŸ‡µ', 'æ—¥': 'ğŸ‡¯ğŸ‡µ',
  'éŸ©å›½': 'ğŸ‡°ğŸ‡·', 'KR': 'ğŸ‡°ğŸ‡·', 'Korea': 'ğŸ‡°ğŸ‡·', 'éŸ©': 'ğŸ‡°ğŸ‡·',
  'æ–°åŠ å¡': 'ğŸ‡¸ğŸ‡¬', 'SG': 'ğŸ‡¸ğŸ‡¬', 'Singapore': 'ğŸ‡¸ğŸ‡¬', 'ç‹®åŸ': 'ğŸ‡¸ğŸ‡¬', 'å¡': 'ğŸ‡¸ğŸ‡¬',
  'é©¬æ¥è¥¿äºš': 'ğŸ‡²ğŸ‡¾', 'MY': 'ğŸ‡²ğŸ‡¾', 'Malaysia': 'ğŸ‡²ğŸ‡¾', 'é©¬æ¥': 'ğŸ‡²ğŸ‡¾',
  'æ³°å›½': 'ğŸ‡¹ğŸ‡­', 'TH': 'ğŸ‡¹ğŸ‡­', 'Thailand': 'ğŸ‡¹ğŸ‡­', 'æ³°': 'ğŸ‡¹ğŸ‡­',
  'è¶Šå—': 'ğŸ‡»ğŸ‡³', 'VN': 'ğŸ‡»ğŸ‡³', 'Vietnam': 'ğŸ‡»ğŸ‡³', 'è¶Š': 'ğŸ‡»ğŸ‡³',
  'å°åº¦': 'ğŸ‡®ğŸ‡³', 'IN': 'ğŸ‡®ğŸ‡³', 'India': 'ğŸ‡®ğŸ‡³', 'å°': 'ğŸ‡®ğŸ‡³',
  'å°å°¼': 'ğŸ‡®ğŸ‡©', 'ID': 'ğŸ‡®ğŸ‡©', 'Indonesia': 'ğŸ‡®ğŸ‡©',
  'è²å¾‹å®¾': 'ğŸ‡µğŸ‡­', 'PH': 'ğŸ‡µğŸ‡­', 'Philippines': 'ğŸ‡µğŸ‡­', 'è²': 'ğŸ‡µğŸ‡­',
  'åœŸè€³å…¶': 'ğŸ‡¹ğŸ‡·', 'TR': 'ğŸ‡¹ğŸ‡·', 'Turkey': 'ğŸ‡¹ğŸ‡·', 'åœŸ': 'ğŸ‡¹ğŸ‡·',
  'ä»¥è‰²åˆ—': 'ğŸ‡®ğŸ‡±', 'IL': 'ğŸ‡®ğŸ‡±', 'Israel': 'ğŸ‡®ğŸ‡±',
  'é˜¿è”é…‹': 'ğŸ‡¦ğŸ‡ª', 'AE': 'ğŸ‡¦ğŸ‡ª', 'UAE': 'ğŸ‡¦ğŸ‡ª', 'Dubai': 'ğŸ‡¦ğŸ‡ª', 'è¿ªæ‹œ': 'ğŸ‡¦ğŸ‡ª',
  'æ²™ç‰¹': 'ğŸ‡¸ğŸ‡¦', 'SA': 'ğŸ‡¸ğŸ‡¦', 'Saudi': 'ğŸ‡¸ğŸ‡¦',
  'å·´åŸºæ–¯å¦': 'ğŸ‡µğŸ‡°', 'PK': 'ğŸ‡µğŸ‡°', 'Pakistan': 'ğŸ‡µğŸ‡°',
  'å­ŸåŠ æ‹‰': 'ğŸ‡§ğŸ‡©', 'BD': 'ğŸ‡§ğŸ‡©', 'Bangladesh': 'ğŸ‡§ğŸ‡©',
  'æŸ¬åŸ”å¯¨': 'ğŸ‡°ğŸ‡­', 'KH': 'ğŸ‡°ğŸ‡­', 'Cambodia': 'ğŸ‡°ğŸ‡­',
  'æ¾³é—¨': 'ğŸ‡²ğŸ‡´', 'MO': 'ğŸ‡²ğŸ‡´', 'Macau': 'ğŸ‡²ğŸ‡´', 'æ¾³': 'ğŸ‡²ğŸ‡´',
  
  // ç¾æ´²
  'ç¾å›½': 'ğŸ‡ºğŸ‡¸', 'US': 'ğŸ‡ºğŸ‡¸', 'USA': 'ğŸ‡ºğŸ‡¸', 'United States': 'ğŸ‡ºğŸ‡¸', 'ç¾': 'ğŸ‡ºğŸ‡¸',
  'åŠ æ‹¿å¤§': 'ğŸ‡¨ğŸ‡¦', 'CA': 'ğŸ‡¨ğŸ‡¦', 'Canada': 'ğŸ‡¨ğŸ‡¦', 'åŠ ': 'ğŸ‡¨ğŸ‡¦',
  'å·´è¥¿': 'ğŸ‡§ğŸ‡·', 'BR': 'ğŸ‡§ğŸ‡·', 'Brazil': 'ğŸ‡§ğŸ‡·',
  'é˜¿æ ¹å»·': 'ğŸ‡¦ğŸ‡·', 'AR': 'ğŸ‡¦ğŸ‡·', 'Argentina': 'ğŸ‡¦ğŸ‡·',
  'å¢¨è¥¿å“¥': 'ğŸ‡²ğŸ‡½', 'MX': 'ğŸ‡²ğŸ‡½', 'Mexico': 'ğŸ‡²ğŸ‡½',
  'æ™ºåˆ©': 'ğŸ‡¨ğŸ‡±', 'CL': 'ğŸ‡¨ğŸ‡±', 'Chile': 'ğŸ‡¨ğŸ‡±',
  'å“¥ä¼¦æ¯”äºš': 'ğŸ‡¨ğŸ‡´', 'CO': 'ğŸ‡¨ğŸ‡´', 'Colombia': 'ğŸ‡¨ğŸ‡´',
  'ç§˜é²': 'ğŸ‡µğŸ‡ª', 'PE': 'ğŸ‡µğŸ‡ª', 'Peru': 'ğŸ‡µğŸ‡ª',
  
  // æ¬§æ´²
  'è‹±å›½': 'ğŸ‡¬ğŸ‡§', 'UK': 'ğŸ‡¬ğŸ‡§', 'GB': 'ğŸ‡¬ğŸ‡§', 'United Kingdom': 'ğŸ‡¬ğŸ‡§', 'è‹±': 'ğŸ‡¬ğŸ‡§',
  'å¾·å›½': 'ğŸ‡©ğŸ‡ª', 'DE': 'ğŸ‡©ğŸ‡ª', 'Germany': 'ğŸ‡©ğŸ‡ª', 'å¾·': 'ğŸ‡©ğŸ‡ª',
  'æ³•å›½': 'ğŸ‡«ğŸ‡·', 'FR': 'ğŸ‡«ğŸ‡·', 'France': 'ğŸ‡«ğŸ‡·', 'æ³•': 'ğŸ‡«ğŸ‡·',
  'è·å…°': 'ğŸ‡³ğŸ‡±', 'NL': 'ğŸ‡³ğŸ‡±', 'Netherlands': 'ğŸ‡³ğŸ‡±', 'è·': 'ğŸ‡³ğŸ‡±',
  'ä¿„ç½—æ–¯': 'ğŸ‡·ğŸ‡º', 'RU': 'ğŸ‡·ğŸ‡º', 'Russia': 'ğŸ‡·ğŸ‡º', 'ä¿„': 'ğŸ‡·ğŸ‡º',
  'æ„å¤§åˆ©': 'ğŸ‡®ğŸ‡¹', 'IT': 'ğŸ‡®ğŸ‡¹', 'Italy': 'ğŸ‡®ğŸ‡¹', 'æ„': 'ğŸ‡®ğŸ‡¹',
  'è¥¿ç­ç‰™': 'ğŸ‡ªğŸ‡¸', 'ES': 'ğŸ‡ªğŸ‡¸', 'Spain': 'ğŸ‡ªğŸ‡¸', 'è¥¿': 'ğŸ‡ªğŸ‡¸',
  'ç‘å£«': 'ğŸ‡¨ğŸ‡­', 'CH': 'ğŸ‡¨ğŸ‡­', 'Switzerland': 'ğŸ‡¨ğŸ‡­',
  'ç‘å…¸': 'ğŸ‡¸ğŸ‡ª', 'SE': 'ğŸ‡¸ğŸ‡ª', 'Sweden': 'ğŸ‡¸ğŸ‡ª',
  'æŒªå¨': 'ğŸ‡³ğŸ‡´', 'NO': 'ğŸ‡³ğŸ‡´', 'Norway': 'ğŸ‡³ğŸ‡´',
  'èŠ¬å…°': 'ğŸ‡«ğŸ‡®', 'FI': 'ğŸ‡«ğŸ‡®', 'Finland': 'ğŸ‡«ğŸ‡®',
  'ä¸¹éº¦': 'ğŸ‡©ğŸ‡°', 'DK': 'ğŸ‡©ğŸ‡°', 'Denmark': 'ğŸ‡©ğŸ‡°',
  'æ³¢å…°': 'ğŸ‡µğŸ‡±', 'PL': 'ğŸ‡µğŸ‡±', 'Poland': 'ğŸ‡µğŸ‡±',
  'ä¹Œå…‹å…°': 'ğŸ‡ºğŸ‡¦', 'UA': 'ğŸ‡ºğŸ‡¦', 'Ukraine': 'ğŸ‡ºğŸ‡¦',
  'å¥¥åœ°åˆ©': 'ğŸ‡¦ğŸ‡¹', 'AT': 'ğŸ‡¦ğŸ‡¹', 'Austria': 'ğŸ‡¦ğŸ‡¹',
  'æ¯”åˆ©æ—¶': 'ğŸ‡§ğŸ‡ª', 'BE': 'ğŸ‡§ğŸ‡ª', 'Belgium': 'ğŸ‡§ğŸ‡ª',
  'çˆ±å°”å…°': 'ğŸ‡®ğŸ‡ª', 'IE': 'ğŸ‡®ğŸ‡ª', 'Ireland': 'ğŸ‡®ğŸ‡ª',
  'è‘¡è„ç‰™': 'ğŸ‡µğŸ‡¹', 'PT': 'ğŸ‡µğŸ‡¹', 'Portugal': 'ğŸ‡µğŸ‡¹',
  'å¸Œè…Š': 'ğŸ‡¬ğŸ‡·', 'GR': 'ğŸ‡¬ğŸ‡·', 'Greece': 'ğŸ‡¬ğŸ‡·',
  'æ·å…‹': 'ğŸ‡¨ğŸ‡¿', 'CZ': 'ğŸ‡¨ğŸ‡¿', 'Czech': 'ğŸ‡¨ğŸ‡¿',
  'ç½—é©¬å°¼äºš': 'ğŸ‡·ğŸ‡´', 'RO': 'ğŸ‡·ğŸ‡´', 'Romania': 'ğŸ‡·ğŸ‡´',
  'åŒˆç‰™åˆ©': 'ğŸ‡­ğŸ‡º', 'HU': 'ğŸ‡­ğŸ‡º', 'Hungary': 'ğŸ‡­ğŸ‡º',
  'ä¿åŠ åˆ©äºš': 'ğŸ‡§ğŸ‡¬', 'BG': 'ğŸ‡§ğŸ‡¬', 'Bulgaria': 'ğŸ‡§ğŸ‡¬',
  'å¢æ£®å ¡': 'ğŸ‡±ğŸ‡º', 'LU': 'ğŸ‡±ğŸ‡º', 'Luxembourg': 'ğŸ‡±ğŸ‡º',
  'å†°å²›': 'ğŸ‡®ğŸ‡¸', 'IS': 'ğŸ‡®ğŸ‡¸', 'Iceland': 'ğŸ‡®ğŸ‡¸',
  
  // å¤§æ´‹æ´²
  'æ¾³å¤§åˆ©äºš': 'ğŸ‡¦ğŸ‡º', 'AU': 'ğŸ‡¦ğŸ‡º', 'Australia': 'ğŸ‡¦ğŸ‡º', 'æ¾³æ´²': 'ğŸ‡¦ğŸ‡º',
  'æ–°è¥¿å…°': 'ğŸ‡³ğŸ‡¿', 'NZ': 'ğŸ‡³ğŸ‡¿', 'New Zealand': 'ğŸ‡³ğŸ‡¿',
  
  // éæ´²
  'å—é': 'ğŸ‡¿ğŸ‡¦', 'ZA': 'ğŸ‡¿ğŸ‡¦', 'South Africa': 'ğŸ‡¿ğŸ‡¦',
  'åŸƒåŠ': 'ğŸ‡ªğŸ‡¬', 'EG': 'ğŸ‡ªğŸ‡¬', 'Egypt': 'ğŸ‡ªğŸ‡¬',
  'å°¼æ—¥åˆ©äºš': 'ğŸ‡³ğŸ‡¬', 'NG': 'ğŸ‡³ğŸ‡¬', 'Nigeria': 'ğŸ‡³ğŸ‡¬',
  'è‚¯å°¼äºš': 'ğŸ‡°ğŸ‡ª', 'KE': 'ğŸ‡°ğŸ‡ª', 'Kenya': 'ğŸ‡°ğŸ‡ª',
}

/**
 * æ ¹æ®èŠ‚ç‚¹åç§°è·å–å›½æ—— emoji
 * @param name èŠ‚ç‚¹åç§°
 * @returns å›½æ—— emojiï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²
 */
export function getFlag(name: string): string {
  // å…ˆæ£€æŸ¥åç§°ä¸­æ˜¯å¦å·²ç»åŒ…å«å›½æ—— emoji
  const flagEmojis = Object.values(flagMap)
  for (const emoji of flagEmojis) {
    if (name.includes(emoji)) {
      return ''
    }
  }

  const upperName = name.toUpperCase()
  
  // éå†æ˜ å°„è¡¨æŸ¥æ‰¾åŒ¹é…
  for (const [key, flag] of Object.entries(flagMap)) {
    // ç®€å•åŒ…å«åŒ¹é…
    if (name.includes(key) || upperName.includes(key.toUpperCase())) {
      return flag
    }
  }
  
  return ''
}

/**
 * åœ¨èŠ‚ç‚¹åç§°å‰æ·»åŠ å›½æ——
 * @param name èŠ‚ç‚¹åç§°
 * @returns å¸¦å›½æ——çš„èŠ‚ç‚¹åç§°
 */
export function addFlag(name: string): string {
  const flag = getFlag(name)
  return flag ? `${flag} ${name}` : name
}

/**
 * ç§»é™¤èŠ‚ç‚¹åç§°ä¸­çš„å›½æ—— emoji
 * @param name èŠ‚ç‚¹åç§°
 * @returns ä¸å¸¦å›½æ——çš„èŠ‚ç‚¹åç§°
 */
export function removeFlag(name: string): string {
  const flagEmojis = Object.values(flagMap)
  let result = name
  for (const emoji of flagEmojis) {
    result = result.replace(emoji, '').trim()
  }
  return result
}
